
[toc]

# å…­ã€æ­£åˆ™çš„æ‰©å±•

> Ref: https://es6.ruanyifeng.com/#docs/regex

## 11. å…·åç»„åŒ¹é…

### ç®€ä»‹

æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨åœ†æ‹¬å·è¿›è¡Œ**ç»„åŒ¹é…**ï¼š[ç»„å’ŒèŒƒå›´ï¼ˆGroups and Rangesï¼‰- MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Ranges)

ä¸‹é¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼é‡Œé¢æœ‰ä¸‰ç»„åœ†æ‹¬å·ï¼Œä½¿ç”¨[`exec`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec)æ–¹æ³•ï¼Œå°±å¯ä»¥å°†è¿™ä¸‰ç»„åŒ¹é…ç»“æœæå–å‡ºæ¥ã€‚

```js
const RE_DATE = /(\d{4})-(\d{2})-(\d{2})/;

const matchObj = RE_DATE.exec('1999-12-31');
const year = matchObj[1];
const month = matchObj[2];
const day = matchObj[3];
// æˆ–è€…
// const [, year, month, day] = matchObj;

year	// 1999
month	// 12
day		// 31
```

ç»„åŒ¹é…çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ¯ä¸€ç»„çš„åŒ¹é…å«ä¹‰ä¸å®¹æ˜“çœ‹å‡ºæ¥ï¼Œè€Œä¸”åªèƒ½ç”¨æ•°å­—åºå·ï¼ˆå¦‚`matchObj[1]`ï¼‰å¼•ç”¨ï¼Œè¦æ˜¯ç»„çš„é¡ºåºå˜äº†ï¼Œå¼•ç”¨çš„æ—¶å€™å°±å¿…é¡»æ”¹å˜åºå·ã€‚

ES2018 å¼•å…¥äº†å…·åç»„åŒ¹é…ï¼ˆNamed Capture Gruopsï¼‰ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªç»„åŒ¹é…æŒ‡å®šä¸€ä¸ªåå­—ï¼Œæ—¢ä¾¿äºé˜…è¯»ä»£ç ï¼Œåˆä¾¿äºå¼•ç”¨ã€‚

```js
const RE_DATE = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;

const matchObj = RE_DATE.exec('1999-12-31');

const year = matchObj.groups.year;		// 1999
const month = matchObj.groups.month;	// 12
const day = matchObj.groups.day;		// 31
```

ä¸Šé¢ä»£ç ä¸­ï¼Œâ€œå…·åç»„åŒ¹é…â€åœ¨åœ†æ‹¬å·å†…éƒ¨ï¼Œæ¨¡å¼çš„å¤´éƒ¨æ·»åŠ `?<ç»„å>`ï¼Œç„¶åå°±å¯ä»¥åœ¨`exec`æ–¹æ³•è¿”å›çš„ç»“æœçš„`groups`å±æ€§ä¸Šå¼•ç”¨è¯¥ç»„åã€‚åŒæ—¶ï¼Œæ•°å­—åºå·å¼•ç”¨ä¾ç„¶æœ‰æ•ˆã€‚

### è§£æ„èµ‹å€¼å’Œæ›¿æ¢

æœ‰äº†å…·åç»„åŒ¹é…ä»¥åï¼Œå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ç›´æ¥ä»åŒ¹é…ç»“æœä¸Šä¸ºå˜é‡èµ‹å€¼ã€‚

```js
let {groups: {one, two}} = /^(?<one>.*):(?<two>.*)$/u.exec('foo:bar');
one  // foo
two  // bar
```

å­—ç¬¦ä¸²æ›¿æ¢æ—¶ï¼Œä½¿ç”¨`$<ç»„å>`å¼•ç”¨å…·åç»„ã€‚

```js
let re = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/u;

'2015-01-02'.replace(re, '$<day>/$<month>/$<year>')
// '02/01/2015'
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`replace`æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚

replaceæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°[^Ref^](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace)ï¼Œè¯¥å‡½æ•°çš„å‚æ•°åºåˆ—å¦‚ä¸‹ã€‚

```js
'2015-01-02'.replace(re, (
   matched, // æ•´ä¸ªåŒ¹é…ç»“æœ 2015-01-02
   capture1, // ç¬¬ä¸€ä¸ªç»„åŒ¹é… 2015
   capture2, // ç¬¬äºŒä¸ªç»„åŒ¹é… 01
   capture3, // ç¬¬ä¸‰ä¸ªç»„åŒ¹é… 02
   position, // åŒ¹é…å¼€å§‹çš„ä½ç½® 0
   S, // åŸå­—ç¬¦ä¸² 2015-01-02
   groups // å…·åç»„æ„æˆçš„ä¸€ä¸ªå¯¹è±¡ {year, month, day}
 ) => {
 let {day, month, year} = groups;
 return `${day}/${month}/${year}`;
});
```

å…·åç»„åŒ¹é…åœ¨åŸæ¥çš„åŸºç¡€ä¸Šï¼Œæ–°å¢äº†æœ€åä¸€ä¸ªå‡½æ•°å‚æ•°ï¼šå…·åç»„æ„æˆçš„ä¸€ä¸ªå¯¹è±¡ã€‚å‡½æ•°å†…éƒ¨å¯ä»¥ç›´æ¥å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œè§£æ„èµ‹å€¼ã€‚

### å¼•ç”¨

å¦‚æœè¦åœ¨æ­£åˆ™è¡¨è¾¾å¼å†…éƒ¨å¼•ç”¨æŸä¸ªâ€œå…·åç»„åŒ¹é…â€ï¼Œå¯ä»¥ä½¿ç”¨`\k<ç»„å>`çš„å†™æ³•ã€‚

```js
const RE_TWICE = /^(?<word>[a-z]+)!\k<word>$/;
RE_TWICE.test('abc!abc')	// true
RE_TWICE.test('abc!ab')		// false
```

æ•°å­—å¼•ç”¨ï¼ˆ`\1`ï¼‰ä¾ç„¶æœ‰æ•ˆã€‚

```js
const RE_TWICE = /^(?<word>[a-z]+)!\1$/;
RE_TWICE.test('abc!abc')	// true
RE_TWICE.test('abc!ab')		// false
```

è¿™ä¸¤ç§å¼•ç”¨è¯­æ³•è¿˜å¯ä»¥åŒæ—¶ä½¿ç”¨ã€‚

```js
const RE_TWICE = /^(?<word>[a-z]+)!\k<word>!\1$/;
RE_TWICE.test('abc!abc!abc')	// true
RE_TWICE.test('abc!abc!ab')		// false
```

---

# ä¸ƒã€æ•°å€¼çš„æ‰©å±•

> Ref: https://es6.ruanyifeng.com/#docs/number

## 5. Number.EPSILON

> Îµï¼Œå¸Œè…Šå­—æ¯è¡¨çš„ç¬¬5ä¸ªå­—æ¯

ES6 åœ¨`Number`å¯¹è±¡ä¸Šé¢ï¼Œæ–°å¢ä¸€ä¸ªæå°çš„å¸¸é‡`Number.EPSILON`ã€‚æ ¹æ®è§„æ ¼ï¼Œå®ƒè¡¨ç¤º 1 ä¸å¤§äº 1 çš„æœ€å°æµ®ç‚¹æ•°ä¹‹é—´çš„å·®ã€‚

å¯¹äº 64 ä½æµ®ç‚¹æ•°æ¥è¯´ï¼Œå¤§äº 1 çš„æœ€å°æµ®ç‚¹æ•°ç›¸å½“äºäºŒè¿›åˆ¶çš„`1.00..001`ï¼Œå°æ•°ç‚¹åé¢æœ‰è¿ç»­ 51 ä¸ªé›¶ã€‚è¿™ä¸ªå€¼å‡å» 1 ä¹‹åï¼Œå°±ç­‰äº 2 çš„ -52 æ¬¡æ–¹ã€‚

```js
Number.EPSILON === Math.pow(2, -52)
// true
Number.EPSILON
// 2.220446049250313e-16
Number.EPSILON.toFixed(20)
// "0.00000000000000022204"
```

`Number.EPSILON`å®é™…ä¸Šæ˜¯ JavaScript èƒ½å¤Ÿè¡¨ç¤ºçš„æœ€å°ç²¾åº¦ã€‚è¯¯å·®å¦‚æœå°äºè¿™ä¸ªå€¼ï¼Œå°±å¯ä»¥è®¤ä¸ºå·²ç»æ²¡æœ‰æ„ä¹‰äº†ï¼Œå³ä¸å­˜åœ¨è¯¯å·®äº†ã€‚

`Number.EPSILON`å¯ä»¥ç”¨æ¥è®¾ç½®â€œ**èƒ½å¤Ÿæ¥å—çš„è¯¯å·®èŒƒå›´**â€ã€‚æ¯”å¦‚ï¼Œè¯¯å·®èŒƒå›´è®¾ä¸º 2 çš„-50 æ¬¡æ–¹ï¼ˆå³`Number.EPSILON * Math.pow(2, 2)`ï¼‰ï¼Œå³**å¦‚æœä¸¤ä¸ªæµ®ç‚¹æ•°çš„å·®å°äºè¿™ä¸ªå€¼ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸¤ä¸ªæµ®ç‚¹æ•°ç›¸ç­‰**ã€‚

```js
function withinErrorMargin (left, right) {
  return Math.abs(left - right) < Number.EPSILON * Math.pow(2, 2);
}

0.1 + 0.2 === 0.3					// false
withinErrorMargin(0.1 + 0.2, 0.3)	// true

1.1 + 1.3 === 2.4					// false
withinErrorMargin(1.1 + 1.3, 2.4)	// true
```

ä¸Šé¢çš„ä»£ç ä¸ºæµ®ç‚¹æ•°è¿ç®—ï¼Œéƒ¨ç½²äº†ä¸€ä¸ªè¯¯å·®æ£€æŸ¥å‡½æ•°ã€‚

## 7. Math å¯¹è±¡çš„æ‰©å±•

ES6 åœ¨ Math å¯¹è±¡ä¸Šæ–°å¢äº† 17 ä¸ªä¸æ•°å­¦ç›¸å…³çš„æ–¹æ³•ã€‚æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½æ˜¯*é™æ€æ–¹æ³•*ï¼Œåªèƒ½åœ¨ Math å¯¹è±¡ä¸Šè°ƒç”¨ã€‚

### Math.trunc( )

`Math.trunc`æ–¹æ³•ç”¨äºå»é™¤ä¸€ä¸ªæ•°çš„å°æ•°éƒ¨åˆ†ï¼Œè¿”å›æ•´æ•°éƒ¨åˆ†ã€‚

```js
Math.trunc(4.1)		// 4
Math.trunc(4.9)		// 4
Math.trunc(-4.1)	// -4
Math.trunc(-4.9)	// -4
Math.trunc(-0.1234)	// -0

// å¯¹äºéæ•°å€¼ï¼Œ`Math.trunc`å†…éƒ¨ä½¿ç”¨`Number`æ–¹æ³•å°†å…¶å…ˆè½¬ä¸ºæ•°å€¼ã€‚
Math.trunc('123.456')	// 123
Math.trunc(true)		//1
Math.trunc(false)		// 0
Math.trunc(null)		// 0

// å¯¹äºç©ºå€¼å’Œæ— æ³•æˆªå–æ•´æ•°çš„å€¼ï¼Œè¿”å›`NaN`ã€‚
Math.trunc(NaN);		// NaN
Math.trunc('foo');		// NaN
Math.trunc();			// NaN
Math.trunc(undefined)	// NaN
```

å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚

```js
Math.trunc = Math.trunc || function(x) {
  return x < 0 ? Math.ceil(x) : Math.floor(x);
};
```

### Math.sign( )

`Math.sign`æ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°åˆ°åº•æ˜¯æ­£æ•°ã€è´Ÿæ•°ã€è¿˜æ˜¯é›¶ã€‚å¯¹äºéæ•°å€¼ï¼Œä¼šå…ˆå°†å…¶è½¬æ¢ä¸ºæ•°å€¼ã€‚

```js
Math.sign(-5)	// -1
Math.sign(5)	// +1
Math.sign(0)	// +0
Math.sign(-0)	// -0
Math.sign(NaN)	// NaN
```

å¦‚æœå‚æ•°æ˜¯éæ•°å€¼ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºæ•°å€¼ã€‚å¯¹äºé‚£äº›æ— æ³•è½¬ä¸ºæ•°å€¼çš„å€¼ï¼Œä¼šè¿”å›`NaN`ã€‚

```js
Math.sign('')		// 0
Math.sign(true)		// +1
Math.sign(false)	// 0
Math.sign(null)		// 0
Math.sign('9')		// +1
Math.sign('foo')	// NaN
Math.sign()			// NaN
Math.sign(undefined)// NaN
```

å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚

```js
Math.sign = Math.sign || function(x) {
  x = +x; // convert to a number
  if (x === 0 || isNaN(x)) {
    return x;
  }
  return x > 0 ? 1 : -1;
};
```

### Math.cbrt( )

`Math.cbrt()`æ–¹æ³•ç”¨äºè®¡ç®—ä¸€ä¸ªæ•°çš„ç«‹æ–¹æ ¹ã€‚

```js
Math.cbrt(-1) // -1
Math.cbrt(0)  // 0
Math.cbrt(1)  // 1
Math.cbrt(2)  // 1.2599210498948732
```

å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚

```js
Math.cbrt = Math.cbrt || function(x) {
  var y = Math.pow(Math.abs(x), 1/3);
  return x < 0 ? -y : y;
};
```

### Math.hypot( )

`Math.hypot`æ–¹æ³•è¿”å›æ‰€æœ‰å‚æ•°çš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ã€‚å³ $\sqrt{\sum{a_i^{2}}}$ã€‚

```js
Math.hypot(3, 4);        // 5
Math.hypot(3, 4, 5);     // 7.0710678118654755
Math.hypot();            // 0
Math.hypot(NaN);         // NaN
Math.hypot(3, 4, 'foo'); // NaN
Math.hypot(3, 4, '5');   // 7.0710678118654755
Math.hypot(-3);          // 3
```

å¦‚æœå‚æ•°ä¸æ˜¯æ•°å€¼ï¼ŒMath.hypotæ–¹æ³•ä¼šå°†å…¶è½¬ä¸ºæ•°å€¼ã€‚åªè¦æœ‰ä¸€ä¸ªå‚æ•°æ— æ³•è½¬ä¸ºæ•°å€¼ï¼Œå°±ä¼šè¿”å› `NaN`ã€‚

---

# å…«ã€å‡½æ•°çš„æ‰©å±•

> Ref: https://es6.ruanyifeng.com/#docs/function

## 1. å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼

> Ref: [https://es6.ruanyifeng.com/#docs/function#å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼](https://es6.ruanyifeng.com/#docs/function#å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼)

### æƒ°æ€§æ±‚å€¼

å‚æ•°é»˜è®¤å€¼ä¸æ˜¯ä¼ å€¼çš„ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—é»˜è®¤å€¼è¡¨è¾¾å¼çš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‚æ•°é»˜è®¤å€¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ã€‚

```js
let x = 99;
function foo(p = x + 1) {
  console.log(p);
}

foo() // 100

x = 100;
foo() // 101
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°`p`çš„é»˜è®¤å€¼æ˜¯`x + 1`ã€‚è¿™æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°`foo`ï¼Œéƒ½ä¼šé‡æ–°è®¡ç®—`x + 1`ï¼Œè€Œä¸æ˜¯é»˜è®¤`p`ç­‰äº`100`ã€‚

### å‡½æ•°çš„ length å±æ€§

æŒ‡å®šäº†é»˜è®¤å€¼ä»¥åï¼Œå‡½æ•°çš„`length`å±æ€§ï¼Œå°†è¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‡å®šäº†é»˜è®¤å€¼åï¼Œ`length`å±æ€§å°†å¤±çœŸã€‚

```js
(function (a) {}).length			// 1
(function (a = 5) {}).length		// 0
(function (a, b, c = 5) {}).length	// 2
```

è¿™æ˜¯å› ä¸º`length`å±æ€§çš„å«ä¹‰æ˜¯ï¼Œè¯¥å‡½æ•°é¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°ã€‚æŸä¸ªå‚æ•°æŒ‡å®šé»˜è®¤å€¼ä»¥åï¼Œé¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°å°±ä¸åŒ…æ‹¬è¿™ä¸ªå‚æ•°äº†ã€‚åŒç†ï¼Œåæ–‡çš„ **rest å‚æ•°**ä¹Ÿä¸ä¼šè®¡å…¥`length`å±æ€§ã€‚

```js
(function(...args) {}).length		// 0
```

å¦‚æœè®¾ç½®äº†é»˜è®¤å€¼çš„å‚æ•°ä¸æ˜¯å°¾å‚æ•°ï¼Œé‚£ä¹ˆ`length`å±æ€§ä¹Ÿä¸å†è®¡å…¥åé¢çš„å‚æ•°äº†ã€‚

```js
(function (a = 0, b, c) {}).length	// 0
(function (a, b = 1, c) {}).length	// 1
```

### ä½œç”¨åŸŸ

ä¸€æ—¦è®¾ç½®äº†å‚æ•°çš„é»˜è®¤å€¼ï¼Œå‡½æ•°è¿›è¡Œå£°æ˜åˆå§‹åŒ–æ—¶ï¼Œå‚æ•°ä¼šå½¢æˆä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼ˆcontextï¼‰ã€‚ç­‰åˆ°åˆå§‹åŒ–ç»“æŸï¼Œè¿™ä¸ªä½œç”¨åŸŸå°±ä¼šæ¶ˆå¤±ã€‚è¿™ç§è¯­æ³•è¡Œä¸ºï¼Œåœ¨ä¸è®¾ç½®å‚æ•°é»˜è®¤å€¼æ—¶ï¼Œæ˜¯ä¸ä¼šå‡ºç°çš„ã€‚

```js
var x = 1;

function f(x, y = x) {
  console.log(y);
}

f(2) // 2
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°`y`çš„é»˜è®¤å€¼ç­‰äºå˜é‡`x`ã€‚è°ƒç”¨å‡½æ•°fæ—¶ï¼Œ**å‚æ•°å£°æ˜å½¢æˆä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸ**ã€‚åœ¨è¿™ä¸ªä½œç”¨åŸŸé‡Œé¢ï¼Œ**é»˜è®¤å€¼å˜é‡`x`æŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°`x`**ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡`x`ï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯`2`ã€‚

å†çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚

```js
let x = 1;

function f(y = x) {
  let x = 2;
  console.log(y);
}

f() // 1
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°`f`è°ƒç”¨æ—¶ï¼Œ**å‚æ•°å£°æ˜`y = x`å½¢æˆä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸ**ã€‚è¿™ä¸ªä½œç”¨åŸŸé‡Œé¢ï¼Œå˜é‡`x`æœ¬èº«æ²¡æœ‰å®šä¹‰ï¼Œæ‰€ä»¥**æŒ‡å‘å¤–å±‚çš„å…¨å±€å˜é‡`x`**ã€‚å‡½æ•°è°ƒç”¨æ—¶ï¼Œå‡½æ•°ä½“å†…éƒ¨çš„å±€éƒ¨å˜é‡`x`å½±å“ä¸åˆ°é»˜è®¤å€¼å˜é‡`x`ã€‚

å¦‚æœæ­¤æ—¶ï¼Œå…¨å±€å˜é‡`x`ä¸å­˜åœ¨ã€‚æˆ–è€…å†™æˆ`x = x`ï¼Œå°±ä¼šæŠ¥é”™ã€‚

å¦‚æœå‚æ•°çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨åŸŸä¹Ÿéµå®ˆè¿™ä¸ªè§„åˆ™ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚

```js
let foo = 'outer';

function bar(func = () => foo) {
  let foo = 'inner';
  console.log(func());
}

bar(); // outer
```

## 2. rest å‚æ•°

> Ref: [https://es6.ruanyifeng.com/#docs/function#rest-å‚æ•°](https://es6.ruanyifeng.com/#docs/function#rest-å‚æ•°)

## 5. ç®­å¤´å‡½æ•°

> Ref: [https://es6.ruanyifeng.com/#docs/function#ç®­å¤´å‡½æ•°](https://es6.ruanyifeng.com/#docs/function#ç®­å¤´å‡½æ•°)

### ä½¿ç”¨æ³¨æ„ç‚¹[^Ref^](https://es6.ruanyifeng.com/#docs/function#ä½¿ç”¨æ³¨æ„ç‚¹)

ï¼ˆ1ï¼‰å‡½æ•°ä½“å†…çš„`this`å¯¹è±¡ï¼Œå°±æ˜¯**å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡**ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚
> <s>ç›¸å½“äº`(function() { /*...*/ }).bind(this)`</s> *(å¾…éªŒè¯)*

> ç®­å¤´å‡½æ•°å¯ä»¥è®©`this`æŒ‡å‘å›ºå®šåŒ–ï¼Œè¿™ç§ç‰¹æ€§å¾ˆæœ‰åˆ©äºå°è£…å›è°ƒå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒDOM äº‹ä»¶çš„å›è°ƒå‡½æ•°å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚

```js
var handler = {
  id: '123456',

  init: function() {
    document.addEventListener('click',
      event => this.doSomething(event.type), false);
  },

  doSomething: function(type) {
    console.log('Handling ' + type  + ' for ' + this.id);
  }
};
```

> ä¸Šé¢ä»£ç çš„`init`æ–¹æ³•ä¸­ï¼Œä½¿ç”¨äº†ç®­å¤´å‡½æ•°ï¼Œè¿™å¯¼è‡´è¿™ä¸ªç®­å¤´å‡½æ•°é‡Œé¢çš„`this`ï¼Œæ€»æ˜¯æŒ‡å‘`handler`å¯¹è±¡ã€‚å¦åˆ™ï¼Œå›è°ƒå‡½æ•°è¿è¡Œæ—¶ï¼Œ`this.doSomething`è¿™ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶`this`æŒ‡å‘`document`å¯¹è±¡ã€‚

> é™¤äº†`this`ï¼Œä»¥ä¸‹ä¸‰ä¸ªå˜é‡åœ¨ç®­å¤´å‡½æ•°ä¹‹ä¸­ä¹Ÿæ˜¯ä¸å­˜åœ¨çš„ï¼ŒæŒ‡å‘å¤–å±‚å‡½æ•°çš„å¯¹åº”å˜é‡ï¼š`arguments`ã€`super`ã€`new.target`ã€‚

ï¼ˆ2ï¼‰ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨`new`å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

ï¼ˆ3ï¼‰ä¸å¯ä»¥ä½¿ç”¨`arguments`å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨ rest å‚æ•°ä»£æ›¿ã€‚

ï¼ˆ4ï¼‰ä¸å¯ä»¥ä½¿ç”¨`yield`å‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•°ã€‚

### ä¸é€‚ç”¨åœºåˆ[^Ref^](https://es6.ruanyifeng.com/#docs/function#ä¸é€‚ç”¨åœºåˆ)

**ï¼ˆ1ï¼‰å®šä¹‰å¯¹è±¡çš„æ–¹æ³•ï¼Œä¸”è¯¥æ–¹æ³•å†…éƒ¨åŒ…æ‹¬`this`æ—¶ï¼Œä¸åº”ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚**

```js
const cat = {
  lives: 9,
  jumps: () => {
    this.lives--;
  }
}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`cat.jumps()`æ–¹æ³•æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè¿™æ˜¯é”™è¯¯çš„ã€‚è°ƒç”¨`cat.jumps()`æ—¶ï¼Œå¦‚æœæ˜¯**æ™®é€šå‡½æ•°**ï¼Œè¯¥æ–¹æ³•å†…éƒ¨çš„`this`æŒ‡å‘`cat`ï¼›å¦‚æœå†™æˆä¸Šé¢é‚£æ ·çš„**ç®­å¤´å‡½æ•°**ï¼Œä½¿å¾—**`this`æŒ‡å‘å…¨å±€å¯¹è±¡**ï¼Œå› æ­¤ä¸ä¼šå¾—åˆ°é¢„æœŸç»“æœã€‚è¿™æ˜¯å› ä¸ºå¯¹è±¡ä¸æ„æˆå•ç‹¬çš„ä½œç”¨åŸŸï¼Œå¯¼è‡´`jumps`ç®­å¤´å‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨åŸŸå°±æ˜¯å…¨å±€ä½œç”¨åŸŸã€‚

**ï¼ˆ2ï¼‰éœ€è¦åŠ¨æ€`this`çš„æ—¶å€™ï¼Œä¹Ÿä¸åº”ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚**

```js
var button = document.getElementById('press');
button.addEventListener('click', (event) => {
  this.classList.toggle('on');
});
```

ä¸Šé¢ä»£ç è¿è¡Œæ—¶ï¼Œç‚¹å‡»æŒ‰é’®ä¼šæŠ¥é”™ï¼Œå› ä¸º`button`çš„ç›‘å¬å‡½æ•°æ˜¯ä¸€ä¸ª**ç®­å¤´å‡½æ•°**ï¼Œå¯¼è‡´é‡Œé¢çš„**`this`æŒ‡å‘å…¨å±€å¯¹è±¡**ã€‚å¦‚æœæ”¹æˆ**æ™®é€šå‡½æ•°**ï¼Œ`this`å°±ä¼š**åŠ¨æ€æŒ‡å‘è¢«ç‚¹å‡»çš„æŒ‰é’®å¯¹è±¡**ã€‚ï¼ˆè™½ç„¶è¿™ç§åœºæ™¯ä¸‹ä¸€èˆ¬ä¼šä½¿ç”¨`event.target`æ¥è®¿é—®è¢«ç‚¹å‡»çš„æŒ‰é’®å¯¹è±¡ï¼‰

ï¼ˆ3ï¼‰å¦å¤–ï¼Œå¦‚æœå‡½æ•°ä½“å¾ˆå¤æ‚ï¼Œæœ‰è®¸å¤šè¡Œï¼Œæˆ–è€…å‡½æ•°å†…éƒ¨æœ‰å¤§é‡çš„è¯»å†™æ“ä½œï¼Œä¸å•çº¯æ˜¯ä¸ºäº†è®¡ç®—å€¼ï¼Œè¿™æ—¶ä¹Ÿä¸åº”è¯¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œè€Œæ˜¯è¦ä½¿ç”¨æ™®é€šå‡½æ•°ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç å¯è¯»æ€§ã€‚

---

# ä¹ã€æ•°ç»„çš„æ‰©å±•

> Ref: https://es6.ruanyifeng.com/#docs/array

## 1. æ‰©å±•è¿ç®—ç¬¦

### å«ä¹‰

æ‰©å±•è¿ç®—ç¬¦ï¼ˆspreadï¼‰æ˜¯ä¸‰ä¸ªç‚¹ï¼ˆ`...`ï¼‰ã€‚å®ƒå¥½æ¯” rest å‚æ•°çš„é€†è¿ç®—ï¼Œå°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ã€‚

```js
console.log(...[1, 2, 3])
// 1 2 3

console.log(1, ...[2, 3, 4], 5)
// 1 2 3 4 5

[...document.querySelectorAll('div')]
// [<div>, <div>, <div>]
```

### æ”¾åœ¨åœ†æ‹¬å·çš„æƒ…å†µ

åªæœ‰å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ‰©å±•è¿ç®—ç¬¦æ‰å¯ä»¥æ”¾åœ¨åœ†æ‹¬å·ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

```js
(...[1, 2])
// Uncaught SyntaxError: Unexpected number

console.log((...[1, 2]))
// Uncaught SyntaxError: Unexpected number

console.log(...[1, 2])
// 1 2
```

### æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨

#### ï¼ˆ1ï¼‰å¤åˆ¶æ•°ç»„

```js
const a1 = [1, 2];

// ES5
const a2 = a1.concat();
a2[0] = 2;
a1 // [1, 2]

// ES6
const a3 = [...a1];
// æˆ–è€… const [...a3] = a1; // å®é™…æ˜¯è§£æ„èµ‹å€¼
a3[0] = 2;
a1 // [1, 2]
```

#### ï¼ˆ2ï¼‰åˆå¹¶æ•°ç»„

```js
const arr1 = ['a', 'b'];
const arr2 = ['c'];
const arr3 = ['d', 'e'];

// ES5 çš„åˆå¹¶æ•°ç»„
arr1.concat(arr2, arr3);
// [ 'a', 'b', 'c', 'd', 'e' ]

// ES6 çš„åˆå¹¶æ•°ç»„
[...arr1, ...arr2, ...arr3]
// [ 'a', 'b', 'c', 'd', 'e' ]
```

#### ï¼ˆ3ï¼‰ä¸è§£æ„èµ‹å€¼ç»“åˆ

```js
// ES5
a = list[0], rest = list.slice(1)
// ES6
[a, ...rest] = list
```

å¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

```js
const [...butLast, last] = [1, 2, 3, 4, 5];
// æŠ¥é”™

const [first, ...middle, last] = [1, 2, 3, 4, 5];
// æŠ¥é”™
```

#### ï¼ˆ4ï¼‰å­—ç¬¦ä¸²

æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚æœ‰ä¸€ä¸ªé‡è¦çš„å¥½å¤„ï¼Œé‚£å°±æ˜¯èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å››ä¸ªå­—èŠ‚çš„ Unicode å­—ç¬¦ã€‚

```js
'x\uD83D\uDE80y'.length			// 4
[...'x\uD83D\uDE80y'].length	// 3
```

å› æ­¤ï¼Œæ­£ç¡®è¿”å›å­—ç¬¦ä¸²é•¿åº¦çš„å‡½æ•°ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ã€‚

```js
(function() {
  Object.defineProperty(String.prototype, 'uLength', {
    get() {
      return [...this].length;
    },
    enumerable: false, configurable: false
  });
})();

'x\uD83D\uDE80y'.uLength		// 3
```

å‡¡æ˜¯æ¶‰åŠåˆ°æ“ä½œå››ä¸ªå­—èŠ‚çš„ Unicode å­—ç¬¦çš„å‡½æ•°ï¼Œéƒ½æœ‰è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤ï¼Œæœ€å¥½éƒ½ç”¨æ‰©å±•è¿ç®—ç¬¦æ”¹å†™ã€‚

```js
let str = 'x\uD83D\uDE80y';		// "xğŸš€y"

str.split('').reverse().join('')
// 'y\uDE80\uD83Dx'

[...str].reverse().join('')
// 'y\uD83D\uDE80x'
```

#### ï¼ˆ5ï¼‰å®ç°äº† Iterator æ¥å£çš„å¯¹è±¡

ä»»ä½•å®šä¹‰äº†éå†å™¨ï¼ˆIteratorï¼‰æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚

```js
Number.prototype[Symbol.iterator] = function* () {
  let i = 0;
  let num = this.valueOf();
  while (i < num) {
    yield i++;
  }
}

console.log([...5]) // [0, 1, 2, 3, 4]
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå…ˆå®šä¹‰äº†Numberå¯¹è±¡çš„éå†å™¨æ¥å£ï¼Œæ‰©å±•è¿ç®—ç¬¦å°†5è‡ªåŠ¨è½¬æˆNumberå®ä¾‹ä»¥åï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œå°±ä¼šè¿”å›è‡ªå®šä¹‰çš„ç»“æœã€‚

#### ï¼ˆ6ï¼‰Map å’Œ Set ç»“æ„ï¼ŒGenerator å‡½æ•°

æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„ Iterator æ¥å£ï¼Œå› æ­¤åªè¦å…·æœ‰ Iterator æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œæ¯”å¦‚ Map ç»“æ„ã€‚

```js
let map = new Map([
  [1, 'one'],
  [2, 'two'],
  [3, 'three'],
]);

let arr = [...map.keys()]; // [1, 2, 3]
```

Generator å‡½æ•°è¿è¡Œåï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ã€‚

```js
const go = function*(){
  yield 1;
  yield 2;
  yield 3;
};

[...go()] // [1, 2, 3]
```

## 2. Array.from( )

### åŸºæœ¬ä½¿ç”¨

`Array.from`æ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ ES6 æ–°å¢çš„æ•°æ®ç»“æ„ Set å’Œ Mapï¼‰ã€‚

```js
let arrayLike = {
    '0': 'a',
    '1': 'b',
    '2': 'c',
    length: 3
};

// ES5 çš„å†™æ³•
var arr1 = [].slice.call(arrayLike);	// ['a', 'b', 'c']

// ES6 çš„å†™æ³•
let arr2 = Array.from(arrayLike);		// ['a', 'b', 'c']
```

å®é™…åº”ç”¨ä¸­ï¼Œå¸¸è§çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡æ˜¯ DOM æ“ä½œè¿”å›çš„ NodeList é›†åˆï¼Œä»¥åŠå‡½æ•°å†…éƒ¨çš„`arguments`å¯¹è±¡ã€‚`Array.from`éƒ½å¯ä»¥å°†å®ƒä»¬è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚

åªè¦æ˜¯éƒ¨ç½²äº† Iterator æ¥å£çš„æ•°æ®ç»“æ„ï¼Œ`Array.from`éƒ½èƒ½å°†å…¶è½¬ä¸ºæ•°ç»„ã€‚

æ‰€è°“ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œ**æœ¬è´¨ç‰¹å¾åªæœ‰ä¸€ç‚¹ï¼Œå³å¿…é¡»æœ‰`length`å±æ€§**ã€‚å› æ­¤ï¼Œä»»ä½•æœ‰`length`å±æ€§çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥é€šè¿‡`Array.from`æ–¹æ³•è½¬ä¸ºæ•°ç»„ï¼Œè€Œæ­¤æ—¶æ‰©å±•è¿ç®—ç¬¦å°±æ— æ³•è½¬æ¢ã€‚

```js
Array.from({ length: 3 });
// [ undefined, undefined, undefined ]
```

å¯¹äºè¿˜æ²¡æœ‰éƒ¨ç½²è¯¥æ–¹æ³•çš„æµè§ˆå™¨ï¼Œå¯ä»¥ç”¨`Array.prototype.slice`æ–¹æ³•æ›¿ä»£ã€‚

```js
const toArray = (() =>
  Array.from ? Array.from : obj => [].slice.call(obj)
)();
```

`Array.from()`çš„å¦ä¸€ä¸ªåº”ç”¨æ˜¯ï¼Œå°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ï¼Œç„¶åè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å› ä¸ºå®ƒèƒ½æ­£ç¡®å¤„ç†å„ç§ Unicode å­—ç¬¦ï¼Œå¯ä»¥é¿å… JavaScript å°†å¤§äº`\uFFFF`çš„ Unicode å­—ç¬¦ï¼Œç®—ä½œä¸¤ä¸ªå­—ç¬¦çš„ bugã€‚

### ç¬¬äºŒä¸ªå‚æ•°

`Array.from`è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„`map`æ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„ã€‚

```js
Array.from(arrayLike, x => x * x);
// ç­‰åŒäº
Array.from(arrayLike).map(x => x * x);

Array.from([1, 2, 3], x => x * x)
// [1, 4, 9]
```

```js
let arr1 = Array.from({ length: 2 }, () => 'jack');
// ['jack', 'jack']
arr1[0] === arr1[1]	// true

// **å®Œå…¨ç­‰åŒäºä»¥ä¸‹ä»£ç **ï¼Œä½†æ³¨æ„ä¼ å…¥`fill`çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæ¯ä¸ªä½ç½®éƒ½å¼•ç”¨çš„æ˜¯è¯¥å¯¹è±¡
let arr2 = Array(2).fill('jack');
arr2[0] === arr2[1]	// true
```

## 3. Array.of( )

`Array.of`æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚

```js
Array.of()			// []
Array.of(undefined)	// [undefined]
Array.of(3, 11, 8)	// [3,11,8]
Array.of(3)			// [3]
Array.of(3).length	// 1
```

è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°`Array()`çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´`Array()`çš„è¡Œä¸ºæœ‰å·®å¼‚ã€‚

```js
Array()				// []
Array(undefined)	// [undefined]
Array(3, 11, 8)		// [3, 11, 8]
Array(3)			// [, , ,]
Array(3).length		// 3
```

å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚

```js
Array.of = Array.of || function(...args) {
  return [...args];
  // return [].slice.call(args);
};
```

---

# åã€å¯¹è±¡çš„æ‰©å±•

> Ref: https://es6.ruanyifeng.com/#docs/object

## 5. super å…³é”®å­—

ES6 æ–°å¢äº†å…³é”®å­—`super`ï¼ŒæŒ‡å‘å½“å‰å¯¹è±¡çš„**åŸå‹å¯¹è±¡**ï¼ˆ`__proto__`ï¼‰ã€‚

```js
const proto = {
  x: 'hello',
  foo() {
    console.log(this.x);
  },
};

const obj = {
  x: 'world',
  foo() {
    super.foo();
  }
}

Object.setPrototypeOf(obj, proto);

obj.foo() // "world"
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`super.foo`æŒ‡å‘åŸå‹å¯¹è±¡`proto`çš„`foo`æ–¹æ³•ï¼Œä½†æ˜¯**ç»‘å®šçš„`this`å´è¿˜æ˜¯å½“å‰å¯¹è±¡`obj`**ï¼Œå› æ­¤è¾“å‡ºçš„å°±æ˜¯`world`ã€‚

**:warning: JavaScript å¼•æ“å†…éƒ¨ï¼Œ`super.foo`ç­‰åŒäº`Object.getPrototypeOf(this).foo`ï¼ˆå±æ€§ï¼‰æˆ–`Object.getPrototypeOf(this).foo.call(this)`ï¼ˆæ–¹æ³•ï¼‰ã€‚** 

## 7. é“¾åˆ¤æ–­è¿ç®—ç¬¦[^Ref^](https://es6.ruanyifeng.com/#docs/object#é“¾åˆ¤æ–­è¿ç®—ç¬¦)

### åŸºæœ¬ä½¿ç”¨

```js
const firstName = message?.body?.user?.firstName || 'default';
const fooValue = myForm.querySelector('input[name=foo]')?.value
```

ä¸Šé¢ä»£ç ä½¿ç”¨äº†`?.`è¿ç®—ç¬¦ï¼Œç›´æ¥åœ¨é“¾å¼è°ƒç”¨çš„æ—¶å€™åˆ¤æ–­ï¼Œå·¦ä¾§çš„å¯¹è±¡æ˜¯å¦ä¸º`null`æˆ–`undefined`ã€‚å¦‚æœæ˜¯çš„ï¼Œå°±ä¸å†å¾€ä¸‹è¿ç®—ï¼Œè€Œæ˜¯è¿”å›`undefined`ã€‚

```js
iterator.return?.()
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`iterator.return`å¦‚æœæœ‰å®šä¹‰ï¼Œå°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦åˆ™`iterator.return`ç›´æ¥è¿”å›`undefined`ï¼Œä¸å†æ‰§è¡Œ`?.`åé¢çš„éƒ¨åˆ†ã€‚

é“¾åˆ¤æ–­è¿ç®—ç¬¦æœ‰ä¸‰ç§ç”¨æ³•ã€‚

- `obj?.prop`	// å¯¹è±¡å±æ€§
- `obj?.[expr]`	// åŒä¸Š
- `func?.(...args)`	// å‡½æ•°æˆ–å¯¹è±¡æ–¹æ³•çš„è°ƒç”¨

### ä½¿ç”¨æ³¨æ„ç‚¹

**ï¼ˆ1ï¼‰çŸ­è·¯æœºåˆ¶**

`?.`è¿ç®—ç¬¦ç›¸å½“äºä¸€ç§çŸ­è·¯æœºåˆ¶ï¼Œåªè¦ä¸æ»¡è¶³æ¡ä»¶ï¼Œå°±ä¸å†å¾€ä¸‹æ‰§è¡Œã€‚

```js
a?.[++x]
// ç­‰åŒäº
a == null ? undefined : a[++x]
```

**ï¼ˆ2ï¼‰delete è¿ç®—ç¬¦**

```js
delete a?.b
// ç­‰åŒäº
a == null ? undefined : delete a.b
```

**ï¼ˆ3ï¼‰æ‹¬å·çš„å½±å“**

å¦‚æœå±æ€§é“¾æœ‰åœ†æ‹¬å·ï¼Œé“¾åˆ¤æ–­è¿ç®—ç¬¦å¯¹åœ†æ‹¬å·å¤–éƒ¨æ²¡æœ‰å½±å“ï¼Œåªå¯¹åœ†æ‹¬å·å†…éƒ¨æœ‰å½±å“ã€‚

```js
(a?.b).c
// ç­‰ä»·äº
(a == null ? undefined : a.b).c
```

ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨`?.`è¿ç®—ç¬¦çš„åœºåˆï¼Œä¸åº”è¯¥ä½¿ç”¨åœ†æ‹¬å·ã€‚

**ï¼ˆ4ï¼‰æŠ¥é”™åœºåˆ**

ä»¥ä¸‹å†™æ³•æ˜¯ç¦æ­¢çš„ï¼Œä¼šæŠ¥é”™ã€‚

```js
// æ„é€ å‡½æ•°
new a?.()
new a?.b()

// é“¾åˆ¤æ–­è¿ç®—ç¬¦çš„å³ä¾§æœ‰æ¨¡æ¿å­—ç¬¦ä¸²
a?.`{b}`
a?.b`{c}`

// é“¾åˆ¤æ–­è¿ç®—ç¬¦çš„å·¦ä¾§æ˜¯ super
super?.()
super?.foo

// é“¾è¿ç®—ç¬¦ç”¨äºèµ‹å€¼è¿ç®—ç¬¦å·¦ä¾§
a?.b = c
```

**ï¼ˆ5ï¼‰å³ä¾§ä¸å¾—ä¸ºåè¿›åˆ¶æ•°å€¼**

ä¸ºäº†ä¿è¯å…¼å®¹ä»¥å‰çš„ä»£ç ï¼Œå…è®¸`foo?.3:0`è¢«è§£ææˆ`foo ? .3 : 0`ï¼Œå› æ­¤è§„å®šå¦‚æœ`?.`åé¢ç´§è·Ÿä¸€ä¸ªåè¿›åˆ¶æ•°å­—ï¼Œé‚£ä¹ˆ`?.`ä¸å†è¢«çœ‹æˆæ˜¯ä¸€ä¸ªå®Œæ•´çš„è¿ç®—ç¬¦ï¼Œè€Œä¼šæŒ‰ç…§ä¸‰å…ƒè¿ç®—ç¬¦è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé‚£ä¸ªå°æ•°ç‚¹ä¼šå½’å±äºåé¢çš„åè¿›åˆ¶æ•°å­—ï¼Œå½¢æˆä¸€ä¸ªå°æ•°ã€‚


# åä¸€ã€å¯¹è±¡çš„æ–°å¢æ–¹æ³•

> Ref: https://es6.ruanyifeng.com/#docs/object-methods

## 1. Object.is( )

ES5 æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œåªæœ‰ä¸¤ä¸ªè¿ç®—ç¬¦ï¼šç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ`==`ï¼‰å’Œä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ`===`ï¼‰ã€‚å®ƒä»¬éƒ½æœ‰ç¼ºç‚¹ï¼Œå‰è€…ä¼šè‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹ï¼Œåè€…çš„`NaN`ä¸ç­‰äºè‡ªèº«ï¼Œä»¥åŠ`+0`ç­‰äº`-0`ã€‚JavaScript ç¼ºä¹ä¸€ç§è¿ç®—ï¼Œåœ¨æ‰€æœ‰ç¯å¢ƒä¸­ï¼Œåªè¦ä¸¤ä¸ªå€¼æ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬å°±åº”è¯¥ç›¸ç­‰ã€‚

ES6 æå‡ºâ€œSame-value equalityâ€ï¼ˆåŒå€¼ç›¸ç­‰ï¼‰ç®—æ³•ï¼Œç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚`Object.is`å°±æ˜¯éƒ¨ç½²è¿™ä¸ªç®—æ³•çš„æ–°æ–¹æ³•ã€‚å®ƒç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼Œä¸ä¸¥æ ¼æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆ`===`ï¼‰çš„è¡Œä¸ºåŸºæœ¬ä¸€è‡´ã€‚

```js
Object.is('foo', 'foo')	// true
Object.is({}, {})		// false

+0 === -0				// true
NaN === NaN				// false

Object.is(+0, -0)		// false
Object.is(NaN, NaN)		// true
```

## 6. Object.fromEntries( )[^Ref^](https://es6.ruanyifeng.com/#docs/object-methods#Object-fromEntries)

è¯¥æ–¹æ³•çš„ä¸€ä¸ªç”¨å¤„æ˜¯é…åˆ`URLSearchParams`å¯¹è±¡ï¼Œå°†æŸ¥è¯¢å­—ç¬¦ä¸²è½¬ä¸ºå¯¹è±¡ã€‚

```js
Object.fromEntries(new URLSearchParams('foo=bar&baz=qux'))
// { foo: "bar", baz: "qux" }
```
